## ns.router
Умеет:
- получить из урла - `id` страницы (layout) и параметры
- сгенерировать url по `id` страницы и параметрам

### API

#### `ns.router.baseDir`: `{string}`
Базовая часть урла (если приложение располагается не в корне сайта.

#### `ns.router(url)`: `{ page:string, params:{object} }`
Вычисляет по `url` какая это страница (`layout.id`) и вытаскивает параметры из урла.

#### `ns.router.url(url)`
Генерация урла, когда урл известен и нужно только дописать базовую часть.

#### `ns.router.generateUrl (id, params)`
Генерация урла по `id` страницы (layout) и по набору параметров.
В случае неуспеха - кинет ошибку.

#### `ns.router.routes`
Это объект, в котором нужно указать все урлы, rewrite-ы и redirect-ы.
Кроме этого поддерживается rewrite параметров.

#### `ns.router.regexps`
Тут задаются типы параметров в виде регулярного выражения.

Пример:
`'id': '[A-Za-z_][A-Za-z0-9_-]*'`

### Параметры
Параметры в урле задаются в `{}`, к примеру, `/message/{message-id}`.
Параметр могут быть как между `/`-ами, так и в промежутках, к примеру, `/archive/`{year}-{month}-{day}`.

Тип указывается после имени параметра и отделяется `:`: `{page:int}`.
Если параметр указан без типа - ему присваивается тип `id`. Т.е. `{message-id}` соответствует `{message-id:id}`.

Параметр может быть опциональным.
В этом случае, слеш перед ним тоже становится опциональным.
Чтобы указать, что параметр опционален - нужно дописать `=` или `=default` после имени параметра (или типа, если он указан),
примерно так: `{page:int=0}` или `{page:int=}`.
Если указано дефолтное значение - оно будет в итоговом наборе параметров страницы `params`.

Можно указать фильтр значения параметра.
В этом случае параметр должен иметь строго указанное значение, только в этом случае урл будет заматчен.
Чтобы указать фильтр нужно дописать `==filter` после имени параметра (или типа, если он указан), примерно так: `{color:colors==green}`.
